{% extends "shop/base.html" %}

{% block title %}{{ page_title }} - –ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ NEBOLEY{% endblock %}
{% block header %}{{ page_title }}{% endblock %}

{% block content %}

{% if category %}
<div class="category-header">
    <h1>{{ category.name }}</h1>
    {% if category.description %}
        <p class="category-description">{{ category.description }}</p>
    {% endif %}
</div>
{% endif %}

<div class="products-container">
    {% if products %}
        <div class="products-row">  <!-- –ò–∑–º–µ–Ω–∏–ª–∏ –Ω–∞ row -->
            {% for product in products %}
            <div class="product-card">
                <div class="product-image-container">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                        <div class="no-image">
                            <span>üì∑</span>
                            <p>–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                        </div>
                    {% endif %}
                    
                    {% if product.old_price %}
                    <div class="discount-badge">
                        -{{ product.get_discount_percentage }}%
                    </div>
                    {% endif %}
                </div>
                
                <div class="product-info">
                    <h3 class="product-title">
                        <a href="{% url 'shop:product_detail' product.slug %}">{{ product.name }}</a>
                    </h3>
                    
                    <p class="product-category">{{ product.category.name }}</p>
                    
                    <div class="product-price">
                        {% if product.old_price %}
                            <span class="old-price">{{ product.get_old_price_display }}</span>
                        {% endif %}
                        <span class="current-price">{{ product.get_price_display }}</span>
                    </div>
                    
                    <div class="product-actions">
                        <a href="{% url 'shop:product_detail' product.slug %}" class="view-details-btn">
                            üëÄ –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-products">
            <div class="no-products-icon">üòî</div>
            <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö</p>
            <a href="{% url 'shop:category_list' %}" class="browse-categories-btn">
                üìÇ –ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            </a>
        </div>
    {% endif %}
</div>

{% if products.has_other_pages %}
<nav class="pagination-container">
    <div class="pagination">
        {% if products.has_previous %}
            <a href="?page={{ products.previous_page_number }}" class="pagination-link">
                ‚Üê –ù–∞–∑–∞–¥
            </a>
        {% endif %}
        
        {% for i in products.paginator.page_range %}
            {% if products.number == i %}
                <span class="pagination-current">{{ i }}</span>
            {% else %}
                <a href="?page={{ i }}" class="pagination-link">{{ i }}</a>
            {% endif %}
        {% endfor %}
        
        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}" class="pagination-link">
                –í–ø–µ—Ä–µ–¥ ‚Üí
            </a>
        {% endif %}
    </div>
</nav>
{% endif %}

<style>
.category-header {
    text-align: center;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: var(--border-radius);
}

.category-header h1 {
    margin-bottom: 1rem;
    font-size: 2rem;
}

.category-description {
    font-size: 1.1rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
}

.products-container {
    min-height: 50vh;
    overflow-x: auto; /* –î–æ–±–∞–≤–ª—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
}

.products-row {
    display: flex;
    gap: 1.5rem;
    padding: 1rem 0;
    flex-wrap: nowrap; /* –¢–æ–≤–∞—Ä—ã –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É */
    overflow-x: auto; /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
    scrollbar-width: thin;
    scrollbar-color: var(--secondary-color) #f0f0f0;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
.products-row::-webkit-scrollbar {
    height: 8px;
}

.products-row::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 4px;
}

.products-row::-webkit-scrollbar-thumb {
    background: var(--secondary-color);
    border-radius: 4px;
}

.products-row::-webkit-scrollbar-thumb:hover {
    background: #2980b9;
}

.product-card {
    background: white;
    border-radius: var(--border-radius);
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: var(--transition);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    min-width: 280px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    max-width: 320px; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    flex-shrink: 0; /* –ó–∞–ø—Ä–µ—â–∞–µ–º —Å–∂–∞—Ç–∏–µ */
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.product-image-container {
    position: relative;
    height: 200px;
    background: #f8f9fa;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.product-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.no-image {
    text-align: center;
    color: #6c757d;
}

.no-image span {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 0.5rem;
}

.discount-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--accent-color);
    color: white;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: bold;
}

.product-info {
    padding: 1.5rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

.product-title {
    margin-bottom: 0.5rem;
}

.product-title a {
    color: var(--primary-color);
    text-decoration: none;
    font-size: 1.1rem;
    font-weight: 600;
    line-height: 1.3;
}

.product-title a:hover {
    color: var(--secondary-color);
}

.product-category {
    color: #6c757d;
    font-size: 0.9rem;
    margin-bottom: 1rem;
}

.product-price {
    margin: 1rem 0;
}

.old-price {
    text-decoration: line-through;
    color: #6c757d;
    margin-right: 0.5rem;
    font-size: 0.9rem;
}

.current-price {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--accent-color);
}

.product-actions {
    margin-top: auto;
    padding-top: 1rem;
}

.view-details-btn {
    display: block;
    background: var(--secondary-color);
    color: white;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    border-radius: var(--border-radius);
    text-align: center;
    transition: var(--transition);
    font-weight: 500;
}

.view-details-btn:hover {
    background: #2980b9;
    color: white;
}

.no-products {
    text-align: center;
    padding: 4rem 2rem;
}

.no-products-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
}

.no-products h3 {
    color: var(--primary-color);
    margin-bottom: 1rem;
}

.no-products p {
    color: #6c757d;
    margin-bottom: 2rem;
}

.browse-categories-btn {
    background: var(--secondary-color);
    color: white;
    padding: 1rem 2rem;
    text-decoration: none;
    border-radius: var(--border-radius);
    transition: var(--transition);
}

.browse-categories-btn:hover {
    background: #2980b9;
    color: white;
}

.pagination-container {
    display: flex;
    justify-content: center;
    margin-top: 3rem;
}

.pagination {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.pagination-link, .pagination-current {
    padding: 0.5rem 1rem;
    border: 1px solid #ddd;
    border-radius: var(--border-radius);
    text-decoration: none;
    transition: var(--transition);
}

.pagination-link:hover {
    background: var(--secondary-color);
    color: white;
    border-color: var(--secondary-color);
}

.pagination-current {
    background: var(--secondary-color);
    color: white;
    border-color: var(--secondary-color);
    font-weight: bold;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .products-row {
        gap: 1rem;
        padding: 0.5rem 0;
    }
    
    .product-card {
        min-width: 250px;
        max-width: 280px;
    }
    
    .product-image-container {
        height: 180px;
    }
    
    .category-header {
        padding: 1rem;
        margin-bottom: 1.5rem;
    }
    
    .category-header h1 {
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .products-row {
        gap: 0.75rem;
    }
    
    .product-card {
        min-width: 220px;
        max-width: 240px;
    }
    
    .product-image-container {
        height: 160px;
        padding: 0.75rem;
    }
    
    .product-info {
        padding: 1rem;
    }
    
    .product-title a {
        font-size: 1rem;
    }
}
</style>
{% endblock %}